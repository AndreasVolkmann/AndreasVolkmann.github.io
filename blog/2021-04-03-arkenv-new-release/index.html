<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v8.5.2 <https://hydejack.com/>
--><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="robots" content="noindex"><title>Arkenv v3.2.0 - available on maven central | Andreas Volkmann</title><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Arkenv v3.2.0 - available on maven central" /><meta name="author" content="Andreas Volkmann" /><meta property="og:locale" content="en" /><meta name="description" content="New repository, new features, and a look at how we got here" /><meta property="og:description" content="New repository, new features, and a look at how we got here" /><link rel="canonical" href="https://andreasvolkmann.github.io//blog/2021-04-03-arkenv-new-release/" /><meta property="og:url" content="https://andreasvolkmann.github.io//blog/2021-04-03-arkenv-new-release/" /><meta property="og:site_name" content="Andreas Volkmann" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-03T00:00:00-07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Arkenv v3.2.0 - available on maven central" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Andreas Volkmann"},"dateModified":"2021-04-03T00:00:00-07:00","datePublished":"2021-04-03T00:00:00-07:00","description":"New repository, new features, and a look at how we got here","headline":"Arkenv v3.2.0 - available on maven central","mainEntityOfPage":{"@type":"WebPage","@id":"https://andreasvolkmann.github.io//blog/2021-04-03-arkenv-new-release/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://andreasvolkmann.github.io//assets/icons/icon.png"},"name":"Andreas Volkmann"},"url":"https://andreasvolkmann.github.io//blog/2021-04-03-arkenv-new-release/"}</script><meta name="keywords" content="andreas,volkmann"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Andreas Volkmann"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="application-name" content="Andreas Volkmann"><meta name="msapplication-config" content="/assets/ieconfig.xml"><meta name="theme-color" content="rgb(25,55,71)"><meta name="generator" content="Hydejack v8.5.2" /><link type="application/atom+xml" rel="alternate" href="https://andreasvolkmann.github.io//feed.xml" title="Andreas Volkmann" /><link rel="alternate" href="https://andreasvolkmann.github.io//blog/2021-04-03-arkenv-new-release/" hreflang="en"><link rel="shortcut icon" href="/assets/icons/favicon.ico"><link rel="apple-touch-icon" href="/assets/icons/icon.png"><link rel="manifest" href="/assets/manifest.json"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="dns-prefetch" href="/" id="_baseURL"><link rel="dns-prefetch" href="/sw.js" id="_hrefSW"><link rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.js" id="_hrefKatexJS"><link rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css" id="_hrefKatexCSS"><link rel="dns-prefetch" href="/assets/bower_components/katex/dist/contrib/copy-tex.min.js" id="_hrefKatexCopyJS"><link rel="dns-prefetch" href="/assets/bower_components/katex/dist/contrib/copy-tex.min.css" id="_hrefKatexCopyCSS"><link rel="dns-prefetch" href="/assets/img/swipe.svg" id="_hrefSwipeSVG"> <script> !function(e,t){"use strict";function n(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}e.loadJS=function(e,o){var r=t.createElement("script");r.src=e,o&&n(r,"load",o,{once:!0});var a=t.scripts[0];return a.parentNode.insertBefore(r,a),r},e._loaded=!1,e.loadJSDeferred=function(o,r){function a(){e._loaded=!0,r&&n(c,"load",r,{once:!0});var o=t.scripts[0];o.parentNode.insertBefore(c,o)}var c=t.createElement("script");return c.src=o,e._loaded?a():n(e,"load",a,{once:!0}),c},e.setRel=e.setRelStylesheet=function(e){function o(){this.rel="stylesheet"}n(t.getElementById(e),"load",o,{once:!0})}}(window,document); ; !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); ; !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); ; !function(w, d) { w._noPushState = false; w._noDrawer = false; }(window, document); </script> <!--[if gt IE 8]><!----><style> body{--code-font-family: Menlo,Monaco,Consolas,monospace;--font-weight: 400;--font-weight-bold: 700;--font-weight-heading: 400;--text-muted: #888;--gray-bg: rgba(0,0,0,0.025);--gray-text: #666;--menu-text: #bbb;--body-color: #333;--body-bg: #fff;--border-color: #ebebeb}.clearfix,.sidebar-social::after{content:"";display:table;clear:both}.color-transition,.message,table:not(.highlight) td,table:not(.highlight) th,.hr,hr,p,body{transition:background-color 1s ease, border-color 1s ease}.no-color-transition{transition:none !important}*{box-sizing:border-box}html,body{margin:0;padding:0}html{font-size:16px;line-height:1.75}body{color:var(--body-color);background-color:var(--body-bg);font-weight:var(--font-weight);overflow-y:scroll}a{text-decoration:none}.lead{margin-left:-1rem;margin-right:-1rem}.content img,.img,.content video,.video{max-width:100%}.content img.lead,.img.lead,.content video.lead,.video.lead{max-width:calc(100% + 2rem);width:calc(100% + 2rem)}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{font-weight:var(--font-weight-heading);margin:5rem 0 1rem}h1,.h1{font-size:2rem;line-height:1.3}h2,.h2{font-size:1.5rem;line-height:1.4}h3,.h3{font-size:1.17em;line-height:1.5}h4,h5,h6,.h4,.h5,.h6{font-size:1rem;margin-bottom:0.5rem}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.2em;margin-top:1.5rem;margin-bottom:1.5rem;padding:0 1rem}ul,ol,dl{margin-top:0;margin-bottom:1rem}ul,ol{padding-left:1.25rem}hr{position:relative;margin:3rem 0;border:0;border-top:1px solid var(--border-color)}.hr{border-bottom:1px solid var(--border-color);padding-bottom:1rem;margin-bottom:2rem}table:not(.highlight){border-collapse:collapse;margin-bottom:2rem;margin-left:-1rem}table:not(.highlight) td,table:not(.highlight) th{padding:.25rem .5rem;border:1px solid var(--border-color)}table:not(.highlight) td:first-child,table:not(.highlight) th:first-child{padding-left:1rem}table:not(.highlight) td:last-child,table:not(.highlight) th:last-child{padding-right:1rem}.page{margin-bottom:3em}.page li+li{margin-top:.25rem}.page>header{margin-bottom:2rem}.page-title,.post-title{margin-top:0}.post-date{display:block;margin-top:-0.5rem;margin-bottom:1rem;color:var(--text-muted)}.related-posts{padding-left:0;list-style:none;margin-bottom:2rem}.related-posts>li,.related-posts>li+li{margin-top:1rem}.message{margin-bottom:1rem;padding:1rem;color:var(--gray-text);background-color:var(--gray-bg);margin-left:-1rem;margin-right:-1rem}@media screen{body::before{content:'';width:.5rem;background:var(--border-color);position:fixed;left:0;top:0;bottom:0}}@media screen and (min-width: 64em){body::before{width:21rem}}@media screen and (min-width: 1666px){body::before{width:calc(50% - 28rem)}}@media screen and (min-width: 42em){html{font-size:17px}}@media screen and (min-width: 124em){html{font-size:18px}}.fade-in{animation-duration:500ms;animation-timing-function:ease;animation-name:fade-in;animation-fill-mode:forwards}@keyframes fade-in{from{transform:translateY(-3rem);opacity:0}50%{transform:translateY(-3rem);opacity:0}to{transform:translateY(0);opacity:1}}.fl{float:left}.fr{float:right}.mb4{margin-bottom:4rem}.mb6{margin-bottom:6rem}.mt0{margin-top:0}.mt2{margin-top:2rem}.mt3{margin-top:3rem}.mt4{margin-top:4rem}.pb0{padding-bottom:0}.sixteen-nine{position:relative}.sixteen-nine::before{display:block;content:"";width:100%;padding-top:56.25%}.sixteen-nine>*{position:absolute;top:0;left:0;right:0;bottom:0}.sr-only{display:none}.border{border:1px solid var(--border-color)}hy-push-state a,.a{position:relative;padding-bottom:.15rem;border-bottom:1px solid}hy-push-state a.no-hover,.a.no-hover{border-bottom:none;padding-bottom:0}.content .img{overflow:hidden}.content .img img{margin:0;width:100%;height:100%;background-color:var(--gray-bg)}hy-drawer{width:100%;position:relative;overflow:hidden}@media screen and (min-width: 64em){hy-drawer{position:fixed;width:21rem;top:0;left:0;bottom:0;margin-left:0}hy-drawer.cover{position:relative;width:100%}}@media screen and (min-width: 1666px){hy-drawer{width:calc(50% - 28rem)}}.sidebar{position:relative;display:flex;justify-content:center;align-items:center;color:rgba(255,255,255,0.75);text-align:center;z-index:2;min-height:100vh}.sidebar a{color:#fff;border-bottom-color:rgba(255,255,255,0.2)}.sidebar-bg{position:absolute;top:0;left:calc(50% - 50vw);width:100vw;height:100%;background:#202020 center / cover}.sidebar-bg::after{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,0.05)}.sidebar-bg.sidebar-overlay::after{background:linear-gradient(to bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 50%, rgba(32,32,32,0) 100%)}.sidebar-sticky{position:relative;z-index:3;max-width:21rem;padding:1.5rem;contain:content}.sidebar-about .avatar{margin-bottom:1.5rem}.sidebar-about>h2{margin-top:0}.sidebar-nav>ul{list-style:none;padding-left:0}a.sidebar-nav-item{display:inline-block;font-weight:var(--font-weight-heading);line-height:1.75;padding:.25rem;border-bottom:1px solid rgba(255,255,255,0.2)}.sidebar-social>ul{display:inline-block;list-style:none;padding-left:0;margin-bottom:0}.sidebar-social>ul>li{float:left}.sidebar-social>ul>li>a{display:inline-block;text-align:center;font-size:1.4rem;width:3rem;height:4rem;padding:.5rem 0;line-height:3rem}.sidebar-social>ul li+li{margin-top:0}.fixed-common,.fixed-bottom,.fixed-top{position:fixed;left:0;width:100%;z-index:2}.fixed-top{top:0}.fixed-bottom{bottom:0}.navbar>.content{padding-top:0;padding-bottom:0;min-height:0;color:var(--menu-text)}.nav-btn-bar{margin:0 -1rem 0 -.875rem}.nav-btn{background:none;border:none;padding:1.75rem .875rem;color:var(--menu-text) !important;cursor:pointer}.animation-main{opacity:0;pointer-events:none}.content{position:relative;margin-left:auto;margin-right:auto;padding:6rem 1rem 12rem}@media screen{.content{padding-left:1.5rem;max-width:38rem;min-height:100vh}}@media screen and (min-width: 54em){.content{max-width:42rem}}@media screen and (min-width: 64em){.content{padding-left:1rem;margin-left:24rem;margin-right:3rem}}@media screen and (min-width: 88em){.content{margin-left:25rem;margin-right:4rem;max-width:48rem}}@media screen and (min-width: 1666px){.content{margin:auto}}.avatar{width:6.5rem;height:6.5rem;border-radius:100%;overflow:hidden}@media screen and (min-width: 88em){.avatar{width:7rem;height:7rem}}.content .avatar{float:right;margin-left:.5rem}html{font-family:Noto Sans,Helvetica,Arial,sans-serif}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6,.heading{font-family:Roboto Slab,Helvetica,Arial,sans-serif}</style><link rel="preload" as="style" href="/assets/css/hydejack-8.5.2.css" id="_stylePreload"><link rel="preload" as="style" href="/assets/icomoon/style.css" id="_iconsPreload"><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Roboto+Slab:400|Noto+Sans:400,400i,700,700i&display=swap" id="_fontsPreload"> <script>setRel('_stylePreload');setRel('_iconsPreload');/**/setRel('_fontsPreload');/**/</script> <noscript><link rel="stylesheet" href="/assets/css/hydejack-8.5.2.css"><link rel="stylesheet" href="/assets/icomoon/style.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:400|Noto+Sans:400,400i,700,700i&display=swap"> </noscript><style id="_pageStyle"> .content a:not(.btn){color:#4fb1ba;border-color:rgba(79,177,186,0.2)}.content a:not(.btn):hover{border-color:#4fb1ba}:focus{outline-color:#4fb1ba !important}.btn-primary{color:#fff;background-color:#4fb1ba;border-color:#4fb1ba}.btn-primary:focus,.btn-primary.focus,.form-control:focus,.form-control.focus{box-shadow:0 0 0 3px rgba(79,177,186,0.5)}.btn-primary:hover,.btn-primary.hover{color:#fff;background-color:#409ba3;border-color:#409ba3}.btn-primary:disabled,.btn-primary.disabled{color:#fff;background-color:#4fb1ba;border-color:#4fb1ba}.btn-primary:active,.btn-primary.active{color:#fff;background-color:#409ba3;border-color:#409ba3}::selection{color:#fff;background:#4fb1ba}::-moz-selection{color:#fff;background:#4fb1ba}</style><!--<![endif]--><body class="no-color-transition"><div id="_navbar" class="navbar fixed-top"><div class="content"><div class="nav-btn-bar"> <span class="sr-only">Jump to:</span> <a id="_menu" class="nav-btn no-hover fl" href="#_navigation"> <span class="sr-only">Navigation</span> <span class="icon-menu"></span> </a></div></div></div><hr class="sr-only" hidden /> <hy-push-state replace-ids="_main" link-selector="a[href]:not([href*='/assets/']):not(.external):not(.no-push-state)" duration="250" script-selector="script:not([type^='math/tex'])" prefetch ><main id="_main" class="content fade-in layout-post" role="main" data-color="rgb(79,177,186)" data-theme-color="rgb(25,55,71)" data-image="/assets/img/sidebar-bg.jpg" data-overlay ><article id="post-blog-arkenv-new-release" class="page post mb6" role="article"><header><h1 class="post-title"> Arkenv v3.2.0 - available on maven central</h1><p class="post-date heading"> <time datetime="2021-04-03T00:00:00-07:00">03 Apr 2021</time> in <span>Blog</span><p class="message" > New repository, new features, and a look at how we got here</header><ol id="markdown-toc"><li><a href="#background" id="markdown-toc-background">Background</a><li><a href="#new-repository" id="markdown-toc-new-repository">New repository</a><li><a href="#new-features" id="markdown-toc-new-features">New features</a><ol><li><a href="#plain-class-support" id="markdown-toc-plain-class-support">Plain class support</a><ol><li><a href="#constructor-injection" id="markdown-toc-constructor-injection">Constructor injection</a><li><a href="#modules" id="markdown-toc-modules">Modules</a></ol><li><a href="#new-feature-syntax" id="markdown-toc-new-feature-syntax">New feature syntax</a></ol><li><a href="#breaking-changes" id="markdown-toc-breaking-changes">Breaking changes</a><li><a href="#further-information" id="markdown-toc-further-information">Further information</a></ol><p>I am happy to announce that we have migrated from JCenter to <a href="https://search.maven.org/search?q=arkenv">Maven Central</a>, and are releasing version <code class="language-plaintext highlighter-rouge">3.2.0</code> with new features, including plain class support and constructor injection. Before we dive into the news, I want to take a look back at how we got here.<p>  <hy-img root-margin="512px"  src="https://raw.githubusercontent.com/aPureBase/arkenv/master/docs/arkenv_logo.png" alt="Arkenv logo" >    <noscript><img data-ignore  src="https://raw.githubusercontent.com/aPureBase/arkenv/master/docs/arkenv_logo.png" alt="Arkenv logo" /></noscript>    <span class="loading" slot="loading" hidden>      <span class="icon-cog"></span>    </span>  </hy-img><p>Throughout its lifetime, <a href="https://github.com/aPureBase/arkenv">Arkenv</a> has offered many great learning opportunities, and having the chance to create such a project is something I wish upon every developer.<p>Even though it is in no way a complex, or groundbreaking venture, I still consider it an important stepping stone, being my first open-source library. Keeping the scope small and manageable is probably an advantage when starting out.<h2 id="background">Background</h2><p>There were two primary reasons for the conception of Arkenv.<p>Firstly, we were looking for a way to seamlessly bridge the changing configuration needs in different environments with minimal developer intervention. Starting out with command line libraries like <a href="https://github.com/cbeust/jcommander">JCommander</a>, we soon realized that we wanted a central abstraction to define our external configuration, which didn‚Äôt depend on the configuration source. Pretty much like <a href="https://spring.io/blog/2020/04/23/spring-tips-configuration">Environment</a> in Spring.<p>For example, we wanted to be able to go from a command line-driven environment to an environment variable-driven one without having to add code or recompile.<p>Secondly, I really wanted to try to build something with <a href="https://kotlinlang.org/docs/delegated-properties.html">Kotlin delegates</a>. Another issue we had with many existing, annotation-based libraries, was the lack of type-safety and null support. Quickly, we saw that delegates were a perfect fit for these criteria, and the first version with CLI and ENV support didn‚Äôt fill more than a few lines.<p>The idea was to declare an immutable property, with nullability indicating whether it is optional or not, and whose name is used to resolve it.<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">port</span><span class="p">:</span> <span class="nc">Int</span> <span class="k">by</span> <span class="nf">argument</span><span class="p">()</span>
</code></pre></div></div><p>Once declared, it can be provided via CLI <code class="language-plaintext highlighter-rouge">--port 443</code>, environment variable <code class="language-plaintext highlighter-rouge">PORT=443</code>, or in a profile (properties, yaml) <code class="language-plaintext highlighter-rouge">port: 443</code>.<p>Later on we added support for other sources, like <a href="https://apurebase.gitlab.io/arkenv/features/dot-env-files/">.env files</a> and <a href="https://apurebase.gitlab.io/arkenv/features/docker-secrets/">Docker secrets</a>.<h2 id="new-repository">New repository</h2><p>With the announcement of JCenter ending support of their popular repository, many open-source projects had to migrate to Maven Central. We could have lived without this interruption, but on the other hand, it is great to be able to go with the default repository.<p>From now on, all new releases will be available here.<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">repositories</span> <span class="p">{</span>
    <span class="nf">mavenCentral</span><span class="p">()</span>
<span class="p">}</span>

<span class="nf">implementation</span><span class="p">(</span><span class="s">"com.apurebase"</span><span class="p">,</span> <span class="s">"arkenv"</span><span class="p">,</span> <span class="s">"3.2.0"</span><span class="p">)</span>
<span class="nf">implementation</span><span class="p">(</span><span class="s">"com.apurebase"</span><span class="p">,</span> <span class="s">"arkenv-yaml"</span><span class="p">,</span> <span class="s">"3.2.0"</span><span class="p">)</span> <span class="c1">// for yaml support</span>
</code></pre></div></div><h2 id="new-features">New features</h2><h3 id="plain-class-support">Plain class support</h3><p>It is no longer necessary to extend <code class="language-plaintext highlighter-rouge">Arkenv</code> when defining an argument class.<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">object</span> <span class="nc">Configuration</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">port</span><span class="p">:</span> <span class="nc">Int</span> <span class="k">by</span> <span class="nf">argument</span><span class="p">()</span>
<span class="p">}</span>

<span class="nc">Arkenv</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nc">Arguments</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
</code></pre></div></div><p>Plain classes do not have a <code class="language-plaintext highlighter-rouge">help</code> argument by default.<h4 id="constructor-injection">Constructor injection</h4><p>Instead of declaring arguments, one can now let <code class="language-plaintext highlighter-rouge">Arkenv</code> inject directly into the constructor of a plain class.<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Configuration</span><span class="p">(</span><span class="kd">val</span> <span class="py">port</span><span class="p">:</span> <span class="nc">Int</span><span class="p">)</span>

<span class="c1">// construct an instance with the parse factory function</span>
<span class="kd">val</span> <span class="py">configuration</span> <span class="p">=</span> <span class="nc">Arkenv</span><span class="p">.</span><span class="n">parse</span><span class="p">&lt;</span><span class="nc">Configuration</span><span class="p">&gt;(</span><span class="n">args</span><span class="p">)</span>
</code></pre></div></div><p>Consequently, we cannot apply any config to these arguments, but default values are supported natively.<h4 id="modules">Modules</h4><p>The above approaches can be combined freely, and both support modules, too. In plain classes, modules are declared with a delegate, i.e. <code class="language-plaintext highlighter-rouge">by module()</code>. The module delegate function also accepts a configuration lambda with prefix support.<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">SubConfig</span><span class="p">(</span><span class="kd">val</span> <span class="py">country</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">port</span><span class="p">:</span> <span class="nc">Int</span> <span class="k">by</span> <span class="nf">argument</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">object</span>  <span class="nc">Configuration</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">subModule</span> <span class="k">by</span> <span class="n">module</span><span class="p">&lt;</span><span class="nc">SubConfig</span><span class="p">&gt;()</span>
<span class="p">}</span>

<span class="nc">Arkenv</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nc">Configuration</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
<span class="nc">Configuration</span><span class="p">.</span><span class="n">subModule</span><span class="p">.</span><span class="n">port</span> <span class="c1">// member access</span>
</code></pre></div></div><p>The above <code class="language-plaintext highlighter-rouge">SubConfig</code> class accepts constructor parameters and declares arguments in its body.<p>The <code class="language-plaintext highlighter-rouge">Configuration</code> object declares a module that is automatically created on parse.<h3 id="new-feature-syntax">New feature syntax</h3><p>Features can now be configured with <code class="language-plaintext highlighter-rouge">+</code> and <code class="language-plaintext highlighter-rouge">-</code>.<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">configuration</span> <span class="p">=</span> <span class="nc">Arkenv</span><span class="p">.</span><span class="n">parse</span><span class="p">&lt;</span><span class="nc">Configuration</span><span class="p">&gt;(</span><span class="n">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">+</span><span class="nc">ProfileFeature</span><span class="p">(</span><span class="n">prefix</span> <span class="p">=</span> <span class="s">"app"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="breaking-changes">Breaking changes</h2><p>Most extension functions have moved to the <code class="language-plaintext highlighter-rouge">util</code> package. This will break your build when upgrading, but should be easy to fix, by importing the correct packages.<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//import com.apurebase.arkenv.parse</span>
<span class="k">import</span> <span class="nn">com.apurebase.arkenv.util.parse</span>
</code></pre></div></div><h2 id="further-information">Further information</h2><p>Log any bugs or feature requests on <a href="https://github.com/aPureBase/arkenv">Github</a>.<p>üìÉ Please visit <a href="https://apurebase.gitlab.io/arkenv/">https://apurebase.gitlab.io/arkenv/</a> for in-depth documentation.<p>ü§ù Ask any questions in the Arkenv channel in the <a href="https://kotlinlang.slack.com/messages/CGF74HD19/">official Kotlin Slack</a>.</article><hr class="dingbat related" /><aside class="about related mt4 mb4" role="complementary"><div class="author mt4"> <hy-img src="/assets/img/didi_pilot.png" class="avatar" alt="Andreas Volkmann" root-margin="512px" > <noscript><img data-ignore src="/assets/img/didi_pilot.png" class="avatar" alt="Andreas Volkmann" /></noscript> <span class="loading" slot="loading" hidden> <span class="icon-cog"></span> </span> </hy-img><h2 class="page-title hr"> About</h2><p>Any opinions expressed on this site are my own and do not represent the views of my employer.<div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://github.com/AndreasVolkmann" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="https://play.spotify.com/user/113258637" title="Spotify" class="no-mark-external"> <span class="icon-spotify"></span> <span class="sr-only">Spotify</span> </a><li> <a href="https://soundcloud.com/shin-kudo" title="SoundCloud" class="no-mark-external"> <span class="icon-soundcloud"></span> <span class="sr-only">SoundCloud</span> </a><li> <a href="http://www.last.fm/user/shadowgonzo" title="Last.fm" class="no-mark-external"> <span class="icon-lastfm"></span> <span class="sr-only">Last.fm</span> </a><li> <a href="http://stackoverflow.com/users/5335131/andreas-volkmann" title="Stack Overflow" class="no-mark-external"> <span class="icon-stackoverflow"></span> <span class="sr-only">Stack Overflow</span> </a><li> <a href="https://www.linkedin.com/in/andreas-volkmann-a5553a106" title="LinkedIn" class="no-mark-external"> <span class="icon-linkedin2"></span> <span class="sr-only">LinkedIn</span> </a></ul></div></div></aside><aside class="related mb4" role="complementary"><h2 class="hr">Related Posts</h2><ul class="related-posts"><li> <a href="/blog/2024-07-22-first-agent/" class="h4 flip-title"><span>‚öóÔ∏è Learning from Agents</span></a> <time class="heading faded fine" datetime="2024-07-22T00:00:00-07:00">22 Jul 2024</time><li> <a href="/blog/2024-04-28-onsen-city/" class="h4 flip-title"><span>‚ô®Ô∏è Onsen City</span></a> <time class="heading faded fine" datetime="2024-04-28T00:00:00-07:00">28 Apr 2024</time><li> <a href="/blog/2023-10-07-first-prompt/" class="h4 flip-title"><span>‚öóÔ∏è Distilled knowledge</span></a> <time class="heading faded fine" datetime="2023-10-07T00:00:00-07:00">07 Oct 2023</time></ul></aside><footer role="contentinfo"><hr/><p><small class="copyright">¬© 2024. All rights reserved. </small><hr class="sr-only"/></footer></main><hy-drawer class="" align="left" threshold="10" touch-events prevent-default ><header id="_sidebar" class="sidebar" role="banner"><div class="sidebar-bg sidebar-overlay" style="background-color:rgb(25,55,71);background-image:url(/assets/img/sidebar-bg.jpg)"></div><div class="sidebar-sticky"><div class="sidebar-about"> <a class="no-hover" href="/" tabindex="-1"> <img src="/assets/icons/icon.png" class="avatar" alt="Andreas Volkmann" data-ignore /> </a><h2 class="h1"><a href="/">Andreas Volkmann</a></h2><p class=""> Personal page.</div><nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span><ul><li> <a id="_navigation" href="/posts/" class="sidebar-nav-item" > Blog </a><li> <a href="/about/" class="sidebar-nav-item" > About </a></ul></nav><div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://github.com/AndreasVolkmann" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="https://play.spotify.com/user/113258637" title="Spotify" class="no-mark-external"> <span class="icon-spotify"></span> <span class="sr-only">Spotify</span> </a><li> <a href="https://soundcloud.com/shin-kudo" title="SoundCloud" class="no-mark-external"> <span class="icon-soundcloud"></span> <span class="sr-only">SoundCloud</span> </a><li> <a href="http://www.last.fm/user/shadowgonzo" title="Last.fm" class="no-mark-external"> <span class="icon-lastfm"></span> <span class="sr-only">Last.fm</span> </a><li> <a href="http://stackoverflow.com/users/5335131/andreas-volkmann" title="Stack Overflow" class="no-mark-external"> <span class="icon-stackoverflow"></span> <span class="sr-only">Stack Overflow</span> </a><li> <a href="https://www.linkedin.com/in/andreas-volkmann-a5553a106" title="LinkedIn" class="no-mark-external"> <span class="icon-linkedin2"></span> <span class="sr-only">LinkedIn</span> </a></ul></div></div></header></hy-drawer><hr class="sr-only" hidden /> </hy-push-state> <!--[if gt IE 10]><!----> <script nomodule>!function(){var e=document.createElement("script");if(!("noModule"in e)&&"onbeforeload"in e){var t=!1;document.addEventListener("beforeload",function(n){if(n.target===e)t=!0;else if(!n.target.hasAttribute("nomodule")||!t)return;n.preventDefault()},!0),e.type="module",e.src=".",document.head.appendChild(e),e.remove()}}(); </script> <script type="module" src="/assets/js/hydejack-8.5.2.js"></script> <script nomodule src="/assets/js/hydejack-legacy-8.5.2.js" defer></script> <script>!function(w, d) { w.ga=w.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; /**/ ga('create', 'UA-134200014-1', 'auto'); /**/ var pushStateEl = d.getElementsByTagName('hy-push-state')[0]; var timeoutId; pushStateEl.addEventListener('hy-push-state-load', function() { w.clearTimeout(timeoutId); timeoutId = w.setTimeout(function() { ga('set', 'page', w.location.pathname); ga('send', 'pageview'); }, 500); }); d.addEventListener('hy--cookies-ok', function () { w.ga(function(tracker) { w.ga("set", "anonymizeIp", undefined); localStorage && localStorage.setItem("ga--client-id", tracker.get("clientId")); }); }); w.loadJSDeferred('https://www.google-analytics.com/analytics.js'); }(window, document);</script> <!--<![endif]--><h2 class="sr-only" hidden>Templates (for web app):</h2><template id="_animation-template" hidden><div class="animation-main fixed-top"><div class="content"><div class="page"></div></div></div></template> <template id="_loading-template" hidden><div class="loading nav-btn fr"> <span class="sr-only">Loading‚Ä¶</span> <span class="icon-cog"></span></div></template> <template id="_error-template" hidden><div class="page"><h1 class="page-title">Error</h1><p class="lead"> Sorry, an error occurred while loading <a class="this-link" href=""></a>.</div></template> <template id="_forward-template" hidden> <button id="_forward" class="forward nav-btn no-hover fl"> <span class="sr-only">Forward</span> <span class="icon-arrow-right2"></span> </button> </template> <template id="_back-template" hidden> <button id="_back" class="back nav-btn no-hover fl"> <span class="sr-only">Back</span> <span class="icon-arrow-left2"></span> </button> </template> <template id="_permalink-template" hidden> <a href="#" class="permalink"> <span class="sr-only">Permalink</span> <span class="icon-link"></span> </a> </template></html>
